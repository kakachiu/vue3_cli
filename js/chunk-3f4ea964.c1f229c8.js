(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f4ea964"],{"00b4":function(e,t,a){"use strict";a("ac1f");var l=a("23e7"),o=a("da84"),c=a("c65b"),r=a("e330"),n=a("1626"),s=a("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=o.Error,u=r(/./.test);l({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!n(t))return u(this,e);var a=c(t,this,e);if(null!==a&&!s(a))throw new d("RegExp exec method returned something other than an Object or null");return!!a}})},"5fab":function(e,t,a){"use strict";var l=a("7a23"),o={class:"modal-dialog"},c={class:"modal-content border-0"},r={class:"modal-header bg-danger"},n={key:0,class:"modal-title",id:"delAllOrderModal"},s=Object(l["createElementVNode"])("span",{class:"text-light"},"刪除訂單",-1),i=[s],d={key:1,class:"modal-title",id:"delAllCartModal"},u=Object(l["createElementVNode"])("span",{class:"text-light"},"刪除購物車",-1),m=[u],b=Object(l["createElementVNode"])("button",{class:"btn-close",type:"button","data-bs-dismiss":"modal"},null,-1),p={key:0,class:"modal-body"},O=Object(l["createElementVNode"])("strong",{class:"text-danger"},"是否刪除全部訂單",-1),j=Object(l["createTextVNode"])("(刪除後將無法恢復)。"),f=[O,j],v={key:1,class:"modal-body"},h=Object(l["createTextVNode"])("是否刪除"),V=Object(l["createElementVNode"])("strong",{class:"text-danger"},"全部購物車商品",-1),N=Object(l["createTextVNode"])(" (刪除後將無法恢復)。"),E=[h,V,N],g={class:"modal-footer"},C=Object(l["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button","data-bs-dismiss":"modal"},"取消",-1);function k(e,t,a,s,u,O){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o,[Object(l["createElementVNode"])("div",c,[Object(l["createElementVNode"])("div",r,["delAll"===a.delText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("h5",n,i)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("h5",d,m)),b]),"delAll"===a.delText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",p,f)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",v,E)),Object(l["createElementVNode"])("div",g,[C,"delAll"===a.delText?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,class:"btn btn-danger",type:"button",onClick:t[0]||(t[0]=function(){return O.delAllOrder&&O.delAllOrder.apply(O,arguments)})},"確認刪除")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,class:"btn btn-danger",type:"button",onClick:t[1]||(t[1]=function(){return O.delAllCart&&O.delAllCart.apply(O,arguments)})},"確認刪除"))])])])}var x={props:["delText"],methods:{delAllOrder:function(){this.$emit("delAllOrder")},delAllCart:function(){this.$emit("delAllCart")}}},y=a("d959"),w=a.n(y);const B=w()(x,[["render",k]]);t["a"]=B},b0c0:function(e,t,a){var l=a("83ab"),o=a("5e77").EXISTS,c=a("e330"),r=a("9bf2").f,n=Function.prototype,s=c(n.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=c(i.exec),u="name";l&&!o&&r(n,u,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},b789:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("b64b");var l=a("7a23"),o={class:"mainContent"},c=Object(l["createElementVNode"])("div",{class:"loadingOuter"},[Object(l["createElementVNode"])("div",{class:"load"},[Object(l["createElementVNode"])("div"),Object(l["createElementVNode"])("div"),Object(l["createElementVNode"])("div"),Object(l["createElementVNode"])("div"),Object(l["createElementVNode"])("div")])],-1),r=Object(l["createStaticVNode"])('<div class="swiper mySwiper1"><div class="swiper-wrapper"><div class="swiper-slide"><i class="fa-solid fa-bullhorn bullhorn"></i>假日就是要放鬆，結帳輸入 holiday 優惠碼，一起來放鬆</div><div class="swiper-slide"><i class="fa-solid fa-bullhorn bullhorn"></i>歡慶開幕，結帳輸入 happyhours 優惠碼，將美食帶回家</div></div></div>',1),n={class:"breadcrumb"},s=Object(l["createTextVNode"])("CART \\ 購物車"),i={class:"cartContent"},d=Object(l["createStaticVNode"])('<ul class="progressContent"><li class="active"><div class="number">01</div><div class="text"><div class="en">Check Order</div><div class="cn">填寫資料</div></div></li><li><div class="number">02</div><div class="text"><div class="en">Check OrderInfo</div><div class="cn">訂單確認</div></div></li><li><div class="number">03</div><div class="text"><div class="en">Order Complete</div><div class="cn">完成訂單</div></div></li></ul>',1),u={class:"cartList"},m={class:"list"},b={class:"head"},p=Object(l["createElementVNode"])("div",{class:"title"},"購物清單",-1),O={class:"listTableOuter"},j={class:"table table-hover listTable"},f={class:"imgTd"},v=["src","alt"],h={class:"textTd"},V={class:"name"},N={class:"numberOuter"},E={class:"number"},g=Object(l["createTextVNode"])("數量："),C={class:"num"},k=["onClick"],x=Object(l["createElementVNode"])("i",{class:"fa-solid fa-plus"},null,-1),y=[x],w=["onClick"],B=Object(l["createElementVNode"])("i",{class:"fa-solid fa-minus"},null,-1),A=[B],T={class:"price"},D=["onClick"],M={class:"btn-group coupon"},S={class:"btn-group couponBtn"},P=["disabled"],L={class:"priceOuter"},q={class:"totalPrice"},$=Object(l["createTextVNode"])("總金額"),_={class:"discountPrice"},I=Object(l["createTextVNode"])("折扣後金額"),U={class:"formOuter"},z=Object(l["createElementVNode"])("div",{class:"title"},"填寫購買資訊",-1),F=Object(l["createElementVNode"])("label",{for:"name"},[Object(l["createTextVNode"])("姓名"),Object(l["createElementVNode"])("sup",null,"*")],-1),R=Object(l["createElementVNode"])("label",{for:"email"},[Object(l["createTextVNode"])("聯絡信箱"),Object(l["createElementVNode"])("sup",null,"*")],-1),G=Object(l["createElementVNode"])("label",{for:"tel"},[Object(l["createTextVNode"])("聯絡電話"),Object(l["createElementVNode"])("sup",null,"*")],-1),H=Object(l["createElementVNode"])("label",{for:"address"},[Object(l["createTextVNode"])("收件地址"),Object(l["createElementVNode"])("sup",null,"*")],-1),J=Object(l["createElementVNode"])("label",{for:"message"},"備註",-1),X=["disabled"],Y=Object(l["createElementVNode"])("p",{class:"text"},[Object(l["createTextVNode"])(" 購物車無商品"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("前往購物"),Object(l["createElementVNode"])("i",{class:"fa-solid fa-circle-right arrowRight"})],-1),K={class:"modal fade",id:"delCartModal",ref:"delCartModal",tabindex:"-1"},Q={class:"modal fade",id:"CartAllDel",ref:"CartAllDel",tabindex:"-1"};function W(e,t,a,x,B,W){var Z=Object(l["resolveComponent"])("loading"),ee=Object(l["resolveComponent"])("router-link"),te=Object(l["resolveComponent"])("Field"),ae=Object(l["resolveComponent"])("error-message"),le=Object(l["resolveComponent"])("Form"),oe=Object(l["resolveComponent"])("DelModal"),ce=Object(l["resolveComponent"])("DelAllModal");return Object(l["openBlock"])(),Object(l["createElementBlock"])("main",o,[Object(l["createVNode"])(Z,{active:B.isLoading},{default:Object(l["withCtx"])((function(){return[c]})),_:1},8,["active"]),r,Object(l["createElementVNode"])("ul",n,[Object(l["createElementVNode"])("li",null,[Object(l["createVNode"])(ee,{to:"/cart"},{default:Object(l["withCtx"])((function(){return[s]})),_:1})])]),Object(l["createElementVNode"])("section",i,[B.allCarts.carts.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[d,Object(l["createElementVNode"])("div",u,[Object(l["createElementVNode"])("div",m,[Object(l["createElementVNode"])("div",b,[p,Object(l["createElementVNode"])("div",{class:"delAll",onClick:t[0]||(t[0]=function(e){return W.judgeModal("delAll")})},"全部刪除")]),Object(l["createElementVNode"])("div",O,[Object(l["createElementVNode"])("table",j,[Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(B.allCarts.carts,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:e.id},[Object(l["createElementVNode"])("td",f,[Object(l["createElementVNode"])("img",{class:"img",src:e.product.imageUrl,alt:e.product.title},null,8,v)]),Object(l["createElementVNode"])("td",h,[Object(l["createElementVNode"])("div",V,Object(l["toDisplayString"])(e.product.title),1),Object(l["createElementVNode"])("div",N,[Object(l["createElementVNode"])("div",E,[g,Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e.qty),1)]),Object(l["createElementVNode"])("div",C,[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["add",{active:B.disable===e.id}]),onClick:function(a){return W.addNum(e,t)}},y,10,k),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["min",{active:B.disable===e.id}]),onClick:function(a){return W.miunsNum(e,t)},ref_for:!0,ref:"min"},A,10,w)])])]),Object(l["createElementVNode"])("td",T,Object(l["toDisplayString"])(W.convertToAmount(e.total)),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("i",{class:"fa-solid fa-trash-can delete",onClick:function(t){return W.judgeModal("delete",e)}},null,8,D)])])})),128))])])]),Object(l["createElementVNode"])("div",M,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",placeholder:"輸入優惠券代碼","onUpdate:modelValue":t[1]||(t[1]=function(e){return B.code=e})},null,512),[[l["vModelText"],B.code]]),Object(l["createElementVNode"])("div",S,[Object(l["createElementVNode"])("button",{class:"btn",type:"button",onClick:t[2]||(t[2]=function(){return W.addCoupon&&W.addCoupon.apply(W,arguments)}),disabled:"disabled"===B.couponDisabled},"套用優惠券",8,P)])]),Object(l["createElementVNode"])("div",L,[Object(l["createElementVNode"])("div",q,[$,Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(W.convertToAmount(B.allCarts.total)),1)]),Object(l["createElementVNode"])("div",_,[I,Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(W.convertToAmount(B.allCarts.final_total)),1)])])]),Object(l["createElementVNode"])("div",U,[z,Object(l["createVNode"])(le,{class:"form",onSubmit:W.sendOrder,ref:"form"},{default:Object(l["withCtx"])((function(e){var a=e.errors;return[F,Object(l["createVNode"])(te,{class:Object(l["normalizeClass"])(["form-control",{"is-invalid":a["姓名"]}]),id:"name",type:"text",name:"姓名",placeholder:"HAPPY HOURS",rules:"required",modelValue:B.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return B.user.name=e})},null,8,["class","modelValue"]),Object(l["createVNode"])(ae,{class:"invalid-feedback",name:"姓名"}),R,Object(l["createVNode"])(te,{class:Object(l["normalizeClass"])(["form-control",{"is-invalid":a["E-MAIL"]}]),id:"email",type:"email",name:"E-MAIL",placeholder:"happyhours@example.com",rules:"email|required",modelValue:B.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return B.user.email=e})},null,8,["class","modelValue"]),Object(l["createVNode"])(ae,{class:"invalid-feedback",name:"E-MAIL"}),G,Object(l["createVNode"])(te,{class:Object(l["normalizeClass"])(["form-control",{"is-invalid":a["電話"]}]),id:"tel",name:"電話",type:"tel",placeholder:"0912345678",rules:W.isPhone,modelValue:B.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return B.user.tel=e})},null,8,["class","rules","modelValue"]),Object(l["createVNode"])(ae,{class:"invalid-feedback",name:"電話"}),H,Object(l["createVNode"])(te,{class:Object(l["normalizeClass"])(["form-control",{"is-invalid":a["收件地址"]}]),id:"address",type:"text",name:"收件地址",placeholder:"請輸入收件地址",rules:"required",modelValue:B.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return B.user.address=e})},null,8,["class","modelValue"]),Object(l["createVNode"])(ae,{class:"invalid-feedback",name:"收件地址"}),J,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{id:"message",placeholder:"歡迎留下想說的話..","onUpdate:modelValue":t[7]||(t[7]=function(e){return B.message=e})},null,512),[[l["vModelText"],B.message]]),Object(l["createElementVNode"])("input",{class:"orderBtn",type:"submit",value:"送出訂單",disabled:Object.keys(a).length>0||0===B.allCarts.total},null,8,X)]})),_:1},8,["onSubmit"])])])],64)):(Object(l["openBlock"])(),Object(l["createBlock"])(ee,{key:1,class:"goShop",to:"/products"},{default:Object(l["withCtx"])((function(){return[Y]})),_:1})),Object(l["createElementVNode"])("div",K,[Object(l["createVNode"])(oe,{temp:B.temp,onGetCarts:W.getCarts,"del-model":B.delModel},null,8,["temp","onGetCarts","del-model"])],512),Object(l["createElementVNode"])("div",Q,[Object(l["createVNode"])(ce,{onDelAllCart:W.delAllCart},null,8,["onDelAllCart"])],512)])])}var Z=a("5530"),ee=(a("99af"),a("ac1f"),a("00b4"),a("1276"),a("d3b7"),a("25f0"),a("5319"),a("a15b"),a("3d20")),te=a.n(ee),ae=a("7c2b"),le=a.n(ae),oe=a("6ff1"),ce=a("5fab"),re=a("d415"),ne=a.n(re),se=(a("bbe3"),{data:function(){return{allCarts:{carts:[],total:0,final_total:0,qty:0},code:"",temp:{},user:{name:"",email:"",tel:"",address:""},message:"",isLoading:!1,delModel:"",cartAllDel:"",disable:"",couponDisabled:"",swiper:""}},components:{DelModal:oe["a"],DelAllModal:ce["a"]},methods:{sendOrder:function(){var e=this,t={user:this.user,message:this.message};this.axios.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/order"),{data:t}).then((function(t){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:220});a.fire({icon:"success",title:t.data.message});var l=t.data.orderId;setTimeout((function(){e.$router.push("/order-info/".concat(l))}),1500)})).catch((function(e){var t=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});t.fire({icon:"error",title:e.response.data.message})})),this.$refs.form.resetForm(),this.message=""},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確手機號碼"},judgeModal:function(e,t){switch(e){case"delete":this.temp=Object(Z["a"])({},t),this.delModel.show();break;case"delAll":this.cartAllDel.show();break;default:break}},addCoupon:function(){var e=this;this.couponDisabled="disabled";var t={code:this.code};if(""===this.code){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:280});return a.fire({icon:"error",title:"請輸入優惠券代碼"}),setTimeout((function(){e.couponDisabled=""}),1400),!1}this.axios.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/coupon"),{data:t}).then((function(t){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});a.fire({icon:"success",title:t.data.message}),e.code="",e.couponDisabled="",e.getCarts()})).catch((function(t){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});a.fire({icon:"error",title:t.response.data.message}),e.code="",e.couponDisabled=""}))},delAllCart:function(){var e=this;this.axios.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/carts")).then((function(t){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:220});a.fire({icon:"success",title:t.data.message}),e.getCarts(),e.cartAllDel.hide()})).catch((function(e){var t=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});t.fire({icon:"error",title:e.response.data.message})}))},addNum:function(e,t){e.qty+=1,this.$refs.min[t].classList.remove("active"),this.update(e)},miunsNum:function(e,t){1===e.qty?(e.qty=1,this.$refs.min[t].classList.add("active")):(e.qty-=1,this.update(e))},update:function(e){var t=this;this.disable=e.id;var a={product_id:e.product_id,qty:parseInt(e.qty)};this.axios.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/cart/").concat(e.id),{data:a}).then((function(e){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:240});a.fire({icon:"success",title:e.data.message}),t.getCarts(),t.disable=""})).catch((function(e){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});a.fire({icon:"error",title:e.response.data.message}),t.disable=""}))},getCarts:function(){var e=this;this.isLoading=!0,this.axios.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/cart")).then((function(t){e.allCarts=t.data.data,e.isLoading=!1})).catch((function(t){var a=te.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});a.fire({icon:"error",title:t.response.data.message}),e.isLoading=!1}))},convertToAmount:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"NT$ "+t.join(".")}},created:function(){this.getCarts()},mounted:function(){this.delModel=new le.a(this.$refs.delCartModal,{keyboard:!1,backdrop:"static"}),this.cartAllDel=new le.a(this.$refs.CartAllDel,{keyboard:!1,backdrop:"static"}),this.swiper=new ne.a(".mySwiper1",{direction:"vertical",loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},observer:!0,observeParents:!0})}}),ie=a("d959"),de=a.n(ie);const ue=de()(se,[["render",W]]);t["default"]=ue}}]);
//# sourceMappingURL=chunk-3f4ea964.c1f229c8.js.map