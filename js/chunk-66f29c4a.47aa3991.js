(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66f29c4a"],{1799:function(e,t,n){"use strict";var c=n("7a23"),l={class:"pagination justify-content-center"},a=Object(c["createElementVNode"])("span",null,"«",-1),o=[a],r=["onClick"],d=Object(c["createElementVNode"])("span",null,"»",-1),i=[d];function s(e,t,n,a,d,s){return Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",l,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!1===n.pagination.has_pre}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(e){return s.changePage(n.pagination.current_page-1)}),["prevent"]))},o)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.pagination.total_pages,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:Object(c["normalizeClass"])(["page-item",{active:e===n.pagination.current_page}]),key:t},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])((function(t){return s.changePage(e)}),["prevent"])},Object(c["toDisplayString"])(e),9,r)],2)})),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!1===n.pagination.has_next}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return s.changePage(n.pagination.current_page+1)}),["prevent"]))},i)],2)])}var b={props:["pagination"],methods:{changePage:function(e){this.$emit("change-page",e)}}},m=n("d959"),u=n.n(m);const O=u()(b,[["render",s]]);t["a"]=O},"5fab":function(e,t,n){"use strict";var c=n("7a23"),l={class:"modal-dialog"},a={class:"modal-content border-0"},o={class:"modal-header bg-danger"},r={key:0,class:"modal-title",id:"delAllOrderModal"},d=Object(c["createElementVNode"])("span",{class:"text-light"},"刪除訂單",-1),i=[d],s={key:1,class:"modal-title",id:"delAllCartModal"},b=Object(c["createElementVNode"])("span",{class:"text-light"},"刪除購物車",-1),m=[b],u=Object(c["createElementVNode"])("button",{class:"btn-close",type:"button","data-bs-dismiss":"modal"},null,-1),O={key:0,class:"modal-body"},j=Object(c["createElementVNode"])("strong",{class:"text-danger"},"是否刪除全部訂單",-1),p=Object(c["createTextVNode"])("(刪除後將無法恢復)。"),E=[j,p],g={key:1,class:"modal-body"},h=Object(c["createTextVNode"])("是否刪除"),N=Object(c["createElementVNode"])("strong",{class:"text-danger"},"全部購物車商品",-1),V=Object(c["createTextVNode"])(" (刪除後將無法恢復)。"),k=[h,N,V],f={class:"modal-footer"},v=Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button","data-bs-dismiss":"modal"},"取消",-1);function y(e,t,n,d,b,j){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",l,[Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("div",o,["delAll"===n.delText?(Object(c["openBlock"])(),Object(c["createElementBlock"])("h5",r,i)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("h5",s,m)),u]),"delAll"===n.delText?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,E)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g,k)),Object(c["createElementVNode"])("div",f,[v,"delAll"===n.delText?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,class:"btn btn-danger",type:"button",onClick:t[0]||(t[0]=function(){return j.delAllOrder&&j.delAllOrder.apply(j,arguments)})},"確認刪除")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:1,class:"btn btn-danger",type:"button",onClick:t[1]||(t[1]=function(){return j.delAllCart&&j.delAllCart.apply(j,arguments)})},"確認刪除"))])])])}var B={props:["delText"],methods:{delAllOrder:function(){this.$emit("delAllOrder")},delAllCart:function(){this.$emit("delAllCart")}}},w=n("d959"),x=n.n(w);const D=x()(B,[["render",y]]);t["a"]=D},"67e3":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),l={class:"order mainContent"},a=Object(c["createElementVNode"])("div",{class:"loadingOuter"},[Object(c["createElementVNode"])("div",{class:"load"},[Object(c["createElementVNode"])("div"),Object(c["createElementVNode"])("div"),Object(c["createElementVNode"])("div"),Object(c["createElementVNode"])("div"),Object(c["createElementVNode"])("div")])],-1),o={class:"header"},r=Object(c["createElementVNode"])("h2",{class:"title"},[Object(c["createTextVNode"])("訂單管理"),Object(c["createElementVNode"])("span",null,"Orders")],-1),d={class:"content"},i={class:"responsive"},s={class:"table table-hover"},b=Object(c["createElementVNode"])("thead",{class:"table-dark"},[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{width:"120"},"購買時間"),Object(c["createElementVNode"])("th",null,"Email"),Object(c["createElementVNode"])("th",null,"購買品項"),Object(c["createElementVNode"])("th",null,"應付金額"),Object(c["createElementVNode"])("th",null,"付款狀態"),Object(c["createElementVNode"])("th",null,"操作")])],-1),m={class:"productList"},u={key:0,class:"text-success"},O={key:1,class:"text-danger"},j={class:"btn-group"},p=["onClick"],E=["onClick"],g={class:"mb-2 length"},h=Object(c["createTextVNode"])("目前有"),N={class:"text-success"},V=Object(c["createTextVNode"])("筆訂單"),k={class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1"},f={class:"modal fade",id:"delOrderModal",ref:"delOrderModal",tabindex:"-1"},v={class:"modal fade",id:"orderAllDel",ref:"orderAllDel",tabindex:"-1"};function y(e,t,n,y,B,w){var x=Object(c["resolveComponent"])("loading"),D=Object(c["resolveComponent"])("Pagination"),C=Object(c["resolveComponent"])("OrderModal"),T=Object(c["resolveComponent"])("DelModal"),A=Object(c["resolveComponent"])("DelAllModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])("section",l,[Object(c["createVNode"])(x,{active:B.isLoading},{default:Object(c["withCtx"])((function(){return[a]})),_:1},8,["active"]),Object(c["createElementVNode"])("div",o,[r,Object(c["createElementVNode"])("button",{class:"btn addBtn",type:"button",onClick:t[0]||(t[0]=function(e){return w.judgeModal("delAll")})},"刪除全部訂單")]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("table",s,[b,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(B.orders,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(w.date(e.create_at)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.user.email),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",m,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.id},Object(c["toDisplayString"])(e.product.title)+" "+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1)})),128))])]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(w.convertToAmount(e.total))+" 元",1),Object(c["createElementVNode"])("td",null,[e.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",u,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",O,"未付款"))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("button",{class:"btn btn-sm btn-outline-primary",type:"button",onClick:function(t){return w.judgeModal("detail",e)}},"查看",8,p),Object(c["createElementVNode"])("button",{class:"btn btn-sm btn-outline-danger",type:"button",onClick:function(t){return w.judgeModal("delete",e)}},"刪除",8,E)])])])})),128))])])]),Object(c["createElementVNode"])("p",g,[h,Object(c["createElementVNode"])("span",N,Object(c["toDisplayString"])(B.orders.length),1),V]),Object(c["createVNode"])(D,{pagination:B.pagination,onChangePage:w.getOrders},null,8,["pagination","onChangePage"]),Object(c["createElementVNode"])("div",k,[Object(c["createVNode"])(C,{temp:B.temp,onGetOrders:w.getOrders,"order-modal":B.orderModal},null,8,["temp","onGetOrders","order-modal"])],512),Object(c["createElementVNode"])("div",f,[Object(c["createVNode"])(T,{temp:B.temp,onGetOrders:w.getOrders,"del-model":B.delModel},null,8,["temp","onGetOrders","del-model"])],512),Object(c["createElementVNode"])("div",v,[Object(c["createVNode"])(A,{"del-text":B.delText,onDelAllOrder:w.delAllOrder},null,8,["del-text","onDelAllOrder"])],512)])])}var B=n("5530"),w=(n("99af"),n("ac1f"),n("1276"),n("d3b7"),n("25f0"),n("5319"),n("a15b"),n("7c2b")),x=n.n(w),D=n("3d20"),C=n.n(D),T=n("1799"),A=(n("b0c0"),{class:"modal-dialog modal-xl orderModal"}),M={class:"modal-content border-0"},S=Object(c["createElementVNode"])("div",{class:"modal-header bg-warning text-white"},[Object(c["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createElementVNode"])("span",null,"訂單細節")]),Object(c["createElementVNode"])("button",{class:"btn-close",type:"button","data-bs-dismiss":"modal"})],-1),_={class:"modal-body"},F={class:"row"},P={class:"col-lg-4"},L=Object(c["createElementVNode"])("h3",null,"用戶資料",-1),$={class:"table"},J={key:0},G=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),z=Object(c["createElementVNode"])("th",null,"Email",-1),q=Object(c["createElementVNode"])("th",null,"電話",-1),Y=Object(c["createElementVNode"])("th",null,"地址",-1),I={class:"col-lg-8"},U=Object(c["createElementVNode"])("h3",null,"訂單細節",-1),X={class:"table"},H=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),K=Object(c["createElementVNode"])("th",null,"下單時間",-1),Q=Object(c["createElementVNode"])("th",null,"付款時間",-1),R={key:0},W={key:1},Z=Object(c["createElementVNode"])("th",null,"付款狀態",-1),ee={key:0,class:"text-success"},te={key:1,class:"text-muted"},ne=Object(c["createElementVNode"])("th",null,"總金額",-1),ce=Object(c["createElementVNode"])("h3",null,"選購商品",-1),le={class:"table"},ae=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr")],-1),oe={class:"text-end"},re={class:"d-flex justify-content-end"},de={class:"form-check"},ie={class:"form-check-label",for:"flexCheckDefault"},se={key:0},be={key:1},me={class:"modal-footer"},ue=Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button","data-bs-dismiss":"modal"},"取消",-1);function Oe(e,t,n,l,a,o){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",A,[Object(c["createElementVNode"])("div",M,[S,Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("div",F,[Object(c["createElementVNode"])("div",P,[L,Object(c["createElementVNode"])("table",$,[a.newTemp.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tbody",J,[Object(c["createElementVNode"])("tr",null,[G,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.newTemp.user.name),1)]),Object(c["createElementVNode"])("tr",null,[z,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.newTemp.user.email),1)]),Object(c["createElementVNode"])("tr",null,[q,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.newTemp.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[Y,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.newTemp.user.address),1)])])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",I,[U,Object(c["createElementVNode"])("table",X,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[H,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.newTemp.id),1)]),Object(c["createElementVNode"])("tr",null,[K,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.date(a.newTemp.create_at)),1)]),Object(c["createElementVNode"])("tr",null,[Q,Object(c["createElementVNode"])("td",null,[a.newTemp.paid_date?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",R,Object(c["toDisplayString"])(o.date(a.newTemp.paid_date)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",W,"時間不正確"))])]),Object(c["createElementVNode"])("tr",null,[Z,Object(c["createElementVNode"])("td",null,[a.newTemp.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("strong",ee,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",te,"尚未付款"))])]),Object(c["createElementVNode"])("tr",null,[ne,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(o.convertToAmount(a.newTemp.total)),1)])])]),ce,Object(c["createElementVNode"])("table",le,[ae,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.newTemp.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.qty)+" / "+Object(c["toDisplayString"])(e.product.unit),1),Object(c["createElementVNode"])("td",oe,Object(c["toDisplayString"])(o.convertToAmount(e.final_total)),1)])})),128))])]),Object(c["createElementVNode"])("div",re,[Object(c["createElementVNode"])("div",de,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",id:"flexCheckDefault",type:"checkbox",value:"","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newTemp.is_paid=e})},null,512),[[c["vModelCheckbox"],a.newTemp.is_paid]]),Object(c["createElementVNode"])("label",ie,[a.newTemp.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",se,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",be,"未付款"))])])])])])]),Object(c["createElementVNode"])("div",me,[ue,Object(c["createElementVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=function(e){return o.edidPay(a.newTemp.id)})},"修改付款狀態")])])])}n("e9c4");var je={data:function(){return{newTemp:{total:""}}},props:["temp","orderModal"],watch:{temp:function(){this.newTemp=JSON.parse(JSON.stringify(this.temp))}},methods:{date:function(e){var t=new Date(1e3*e),n="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());return n},convertToAmount:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$ "+t.join(".")},edidPay:function(e){var t=this;this.axios.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/order/").concat(e),{data:this.newTemp}).then((function(e){var n=C.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:250});n.fire({icon:"success",title:e.data.message}),t.orderModal.hide(),t.$emit("getOrders")})).catch((function(e){var t=C.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});t.fire({icon:"error",title:e.response.data.message})}))}}},pe=n("d959"),Ee=n.n(pe);const ge=Ee()(je,[["render",Oe]]);var he=ge,Ne=n("6ff1"),Ve=n("5fab"),ke={data:function(){return{orders:[],pagination:{},temp:{},orderModal:"",delModel:"",orderAllDel:"",delText:"",isLoading:!1}},components:{Pagination:T["a"],OrderModal:he,DelModal:Ne["a"],DelAllModal:Ve["a"]},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.axios.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/orders?page=").concat(t)).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination,e.isLoading=!1})).catch((function(t){var n=C.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});n.fire({icon:"error",title:t.response.data.message}),e.isLoading=!1}))},date:function(e){var t=new Date(1e3*e),n="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());return n},convertToAmount:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"$ "+t.join(".")},judgeModal:function(e,t){switch(e){case"detail":this.temp=Object(B["a"])({},t),this.orderModal.show();break;case"delete":this.temp=Object(B["a"])({},t),this.delModel.show();break;case"delAll":this.delText=e,this.orderAllDel.show();break;default:break}},delAllOrder:function(){var e=this;this.axios.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("kakachiu","/admin/orders/all")).then((function(t){var n=C.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:220});n.fire({icon:"success",title:t.data.message}),e.orderAllDel.hide(),e.getOrders()})).catch((function(e){var t=C.a.mixin({toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0,timer:1400,width:320});t.fire({icon:"error",title:e.response.data.message})}))}},created:function(){this.getOrders()},mounted:function(){this.orderModal=new x.a(this.$refs.orderModal,{keyboard:!1,backdrop:"static"}),this.delModel=new x.a(this.$refs.delOrderModal,{keyboard:!1,backdrop:"static"}),this.orderAllDel=new x.a(this.$refs.orderAllDel,{keyboard:!1,backdrop:"static"})}};const fe=Ee()(ke,[["render",y]]);t["default"]=fe},b0c0:function(e,t,n){var c=n("83ab"),l=n("5e77").EXISTS,a=n("e330"),o=n("9bf2").f,r=Function.prototype,d=a(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(i.exec),b="name";c&&!l&&o(r,b,{configurable:!0,get:function(){try{return s(i,d(this))[1]}catch(e){return""}}})},e9c4:function(e,t,n){var c=n("23e7"),l=n("da84"),a=n("d066"),o=n("2ba4"),r=n("e330"),d=n("d039"),i=l.Array,s=a("JSON","stringify"),b=r(/./.exec),m=r("".charAt),u=r("".charCodeAt),O=r("".replace),j=r(1..toString),p=/[\uD800-\uDFFF]/g,E=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,h=function(e,t,n){var c=m(n,t-1),l=m(n,t+1);return b(E,e)&&!b(g,l)||b(g,e)&&!b(E,c)?"\\u"+j(u(e,0),16):e},N=d((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&c({target:"JSON",stat:!0,forced:N},{stringify:function(e,t,n){for(var c=0,l=arguments.length,a=i(l);c<l;c++)a[c]=arguments[c];var r=o(s,null,a);return"string"==typeof r?O(r,p,h):r}})}}]);
//# sourceMappingURL=chunk-66f29c4a.47aa3991.js.map